<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <title>Document</title>
    <style>
		body { margin: 0; }
		canvas { width: 100%; height: 100% }
	</style>
</head>
<body>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/three.js/107/three.min.js"></script>
    <script src="orbit.js"></script>
    <script>

        var scene = new THREE.Scene();


        // EARTH

        var geometry  = new THREE.SphereGeometry(0.5, 32, 32)
        var material  = new THREE.MeshPhongMaterial()
        var earthMesh = new THREE.Mesh(geometry, material)

        material.map  = THREE.ImageUtils.loadTexture('tex/earth.jpg')

        // material.bumpMap   = THREE.ImageUtils.loadTexture('tex/bump.jpg')
        // material.bumpScale = 0.05

        // material.specularMap = THREE.ImageUtils.loadTexture('tex/specular.jpg')
        // material.specular    = new THREE.Color('grey')

        scene.add(earthMesh)


        // CLOUDS

        // var canvasCloud = THREE.ImageUtils.loadTexture('tex/clouds.jpg')
        var canvasCloud = new THREE.TextureLoader().load( "tex/clouds.jpg" );

        var geometry    = new THREE.SphereGeometry(0.51, 32, 32)
        var material    = new THREE.MeshPhongMaterial({
            // map         : new THREE.Texture(canvasCloud),
            map         : THREE.ImageUtils.loadTexture('tex/clouds.jpg'),
            emissiveMap : THREE.ImageUtils.loadTexture('tex/clouds2.jpg'),
            side        : THREE.DoubleSide,
            opacity     : 0.8,
            transparent : true,
            depthWrite  : false,
        })
        var cloudMesh = new THREE.Mesh(geometry, material)
        // earthMesh.add(cloudMesh)


        // STARS

        // create the geometry sphere
        var geometry  = new THREE.SphereGeometry(10, 32, 32)
        // create the material, using a texture of startfield
        var material  = new THREE.MeshBasicMaterial()
        material.map   = THREE.ImageUtils.loadTexture('tex/stars.jpg')
        material.side  = THREE.BackSide
        // create the mesh based on geometry and material
        var starsMesh  = new THREE.Mesh(geometry, material)

        scene.add(starsMesh)


        // Renderer

        var renderer = new THREE.WebGLRenderer();
        renderer.setSize( window.innerWidth, window.innerHeight );
        document.body.appendChild( renderer.domElement );


        // Lights

        var light = new THREE.DirectionalLight( 0xdddddd, 1 );
        light.position.set( 80, 80, 80 );
        scene.add( light );

        var light = new THREE.DirectionalLight( 0xdddddd, 1 );
        light.position.set( -80, -80, -80 );
        scene.add( light );


        // Camera

        var camera = new THREE.PerspectiveCamera( 75, window.innerWidth / window.innerHeight, 0.1, 1000 );
        var controls = new THREE.OrbitControls( camera, renderer.domElement );
        camera.position.set( 0, 0, 0.75 );
        controls.update();


        // camera.position.z = 5;

        var delta = 0.01

        function animate() {
        	requestAnimationFrame( animate );
            // earthMesh.rotation.y  += 1/32 * delta
            // cloudMesh.rotation.y  += 1/16 * delta
            controls.update();
        	renderer.render( scene, camera );
        }
        animate();

	</script>
</body>
</html>
